<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payroll API Tester</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-8">Payroll API Tester for Postman</h1>

        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h2 class="text-xl font-semibold mb-4">API Endpoints Available</h2>
            <div class="space-y-4">
                <div class="border-l-4 border-green-500 pl-4">
                    <h3 class="font-semibold text-green-700">GET Endpoints</h3>
                    <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                        <li><code>GET /HCM/api/payroll.php?path=summary</code> - Get payroll summary</li>
                        <li><code>GET /HCM/api/payroll.php?path=records</code> - Get payroll records</li>
                        <li><code>GET /HCM/api/payroll.php?path=employee&employee_id=EMP001</code> - Get specific employee payroll</li>
                        <li><code>GET /HCM/api/payroll.php?path=periods</code> - Get payroll periods</li>
                        <li><code>GET /HCM/api/payroll.php</code> - Get all payroll data</li>
                    </ul>
                </div>

                <div class="border-l-4 border-blue-500 pl-4">
                    <h3 class="font-semibold text-blue-700">POST Endpoints</h3>
                    <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                        <li><code>POST /HCM/api/payroll.php?path=process</code> - Process payroll</li>
                        <li><code>POST /HCM/api/payroll.php?path=period</code> - Create payroll period</li>
                        <li><code>POST /HCM/api/payroll.php?path=approve</code> - Approve payroll</li>
                    </ul>
                </div>

                <div class="border-l-4 border-yellow-500 pl-4">
                    <h3 class="font-semibold text-yellow-700">PUT Endpoints</h3>
                    <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                        <li><code>PUT /HCM/api/payroll.php?path=update</code> - Update payroll record</li>
                        <li><code>PUT /HCM/api/payroll.php?path=status</code> - Update payroll status</li>
                    </ul>
                </div>

                <div class="border-l-4 border-red-500 pl-4">
                    <h3 class="font-semibold text-red-700">DELETE Endpoints</h3>
                    <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                        <li><code>DELETE /HCM/api/payroll.php?path=record</code> - Delete payroll record</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h2 class="text-xl font-semibold mb-4">Sample Postman Requests</h2>

            <div class="space-y-6">
                <div>
                    <h3 class="font-semibold text-green-700 mb-2">1. Get Payroll Summary</h3>
                    <div class="bg-gray-100 p-3 rounded">
                        <p><strong>Method:</strong> GET</p>
                        <p><strong>URL:</strong> <code>http://localhost/HCM/api/payroll.php?path=summary</code></p>
                        <p><strong>Headers:</strong> Content-Type: application/json</p>
                    </div>
                </div>

                <div>
                    <h3 class="font-semibold text-blue-700 mb-2">2. Process Payroll</h3>
                    <div class="bg-gray-100 p-3 rounded">
                        <p><strong>Method:</strong> POST</p>
                        <p><strong>URL:</strong> <code>http://localhost/HCM/api/payroll.php?path=process</code></p>
                        <p><strong>Headers:</strong> Content-Type: application/json</p>
                        <p><strong>Body (JSON):</strong></p>
                        <pre class="mt-2 text-sm bg-white p-2 rounded border">{
  "period_id": 1,
  "employee_ids": []
}</pre>
                    </div>
                </div>

                <div>
                    <h3 class="font-semibold text-blue-700 mb-2">3. Create Payroll Period</h3>
                    <div class="bg-gray-100 p-3 rounded">
                        <p><strong>Method:</strong> POST</p>
                        <p><strong>URL:</strong> <code>http://localhost/HCM/api/payroll.php?path=period</code></p>
                        <p><strong>Headers:</strong> Content-Type: application/json</p>
                        <p><strong>Body (JSON):</strong></p>
                        <pre class="mt-2 text-sm bg-white p-2 rounded border">{
  "period_name": "April 2024",
  "start_date": "2024-04-01",
  "end_date": "2024-04-30",
  "pay_date": "2024-05-05"
}</pre>
                    </div>
                </div>

                <div>
                    <h3 class="font-semibold text-yellow-700 mb-2">4. Update Payroll Record</h3>
                    <div class="bg-gray-100 p-3 rounded">
                        <p><strong>Method:</strong> PUT</p>
                        <p><strong>URL:</strong> <code>http://localhost/HCM/api/payroll.php?path=update</code></p>
                        <p><strong>Headers:</strong> Content-Type: application/json</p>
                        <p><strong>Body (JSON):</strong></p>
                        <pre class="mt-2 text-sm bg-white p-2 rounded border">{
  "employee_id": "EMP001",
  "updates": {
    "basic_salary": 60000,
    "allowances": 8500
  }
}</pre>
                    </div>
                </div>

                <div>
                    <h3 class="font-semibold text-yellow-700 mb-2">5. Update Payroll Status</h3>
                    <div class="bg-gray-100 p-3 rounded">
                        <p><strong>Method:</strong> PUT</p>
                        <p><strong>URL:</strong> <code>http://localhost/HCM/api/payroll.php?path=status</code></p>
                        <p><strong>Headers:</strong> Content-Type: application/json</p>
                        <p><strong>Body (JSON):</strong></p>
                        <pre class="mt-2 text-sm bg-white p-2 rounded border">{
  "employee_id": "EMP001",
  "status": "Approved"
}</pre>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-lg">
            <h2 class="text-xl font-semibold mb-4">Testing Instructions for Postman</h2>
            <ol class="list-decimal list-inside space-y-2 text-gray-700">
                <li>Open Postman application</li>
                <li>Create a new request</li>
                <li>Set the HTTP method (GET, POST, PUT, DELETE)</li>
                <li>Enter the URL with the appropriate path parameter</li>
                <li>Add headers: <code>Content-Type: application/json</code></li>
                <li>For POST/PUT requests, add the JSON body in the Body tab (select "raw" and "JSON")</li>
                <li>Click "Send" to execute the request</li>
                <li>Check the response in the lower panel</li>
            </ol>

            <div class="mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded">
                <p class="text-yellow-800"><strong>Note:</strong> Some endpoints require authentication. If you get a redirect to login.php, you'll need to authenticate first or modify the API to bypass authentication for testing.</p>
            </div>
        </div>
    </div>

    <script>
        // Add copy to clipboard functionality
        document.addEventListener('DOMContentLoaded', function() {
            const codeBlocks = document.querySelectorAll('pre');
            codeBlocks.forEach(block => {
                block.style.cursor = 'pointer';
                block.title = 'Click to copy';
                block.addEventListener('click', function() {
                    navigator.clipboard.writeText(this.textContent).then(() => {
                        const originalBg = this.style.backgroundColor;
                        this.style.backgroundColor = '#d1fae5';
                        setTimeout(() => {
                            this.style.backgroundColor = originalBg;
                        }, 500);
                    });
                });
            });
        });
    </script>
</body>
</html>